function updatePoll(o){o.optionIdx;let e=o.postId,l=(o.userId,o.optionId),n=(o.pollId,o.poll);console.log(l);let s=$(`#wrapperforpoll-${e} label`);for(let o=0;o<s.length;o++)s[o].innerHTML=`\n    <div class="row1">\n    <div class="column">\n        <span class="circle"></span>\n        <span class="text">${n.options[o].text}</span>\n    </div>\n    <span class="percent" id="percent-${l}">${n.options[o].percentage}%</span>\n    </div>\n    <div class="progress" id="progress-${l}" style='--w:${n.options[o].percentage}'></div>\n      `}function pollclick(o,e,l,n,s){var t={optionIdx:o,postId:e,optionId:l,pollId:n,userId:s};$.ajax({type:"POST",url:"/polls/vote",data:t}).done((function(t){if("You have already voted"==t.message)new Notification("You have already voted","warning");else{const p=t.data.poll;console.log(p);let a=$(`#wrapperforpoll-${e} label`);$(`#wrapperforpoll-${e} input`);for(let o=0;o<a.length;o++)a[o].outerHTML=`<label for="opt-${o+1}" class="opt-${o+1}> selectall ${p.options[o].votes.includes(s)?"selected":""} ">\n                        <div class="row1">\n                        <div class="column">\n                            <span class="circle"></span>\n                            <span class="text">${p.options[o].text}</span>\n                        </div>\n                        <span class="percent" id="percent-${l}">${p.options[o].percentage}%</span>\n                        </div>\n                        <div class="progress" id="progress-${l}" style='--w:${p.options[o].percentage}'></div>\n                    </label>`;socket.emit("vote",{optionIdx:o,postId:e,optionId:l,pollId:n,userId:s,poll:t.data.poll})}})).fail((function(o){console.log("error in completing the request",o)}))}socket.on("vote",(function(o){o.poll;console.log("vote received",o),updatePoll(o)}));